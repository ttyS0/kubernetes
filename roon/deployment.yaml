apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    service: roon
  name: roon
  namespace: roon
spec:
  strategy:
    type: Recreate
  replicas: 1
  selector:
    matchLabels:
      app: roon
  template:
    metadata:
      labels:
        app: roon
    spec:
      hostname: roon
      containers:
        - image: steefdebruijn/docker-roonserver:latest
          name: roon
          env:
            - name: TZ
              value: "America/Chicago"
          ports:
            - containerPort: 9330
              protocol: TCP
            - containerPort: 9331
              protocol: TCP
            - containerPort: 9332
              protocol: TCP
            - containerPort: 9333
              protocol: TCP
            - containerPort: 9334
              protocol: TCP
            - containerPort: 9335
              protocol: TCP
            - containerPort: 9336
              protocol: TCP
            - containerPort: 9337
              protocol: TCP
            - containerPort: 9339
              protocol: TCP
            - containerPort: 30000
              protocol: TCP
            - containerPort: 30001
              protocol: TCP
            - containerPort: 30002
              protocol: TCP
            - containerPort: 30003
              protocol: TCP
            - containerPort: 30004
              protocol: TCP
            - containerPort: 30005
              protocol: TCP
            - containerPort: 30006
              protocol: TCP
            - containerPort: 30007
              protocol: TCP
            - containerPort: 30008
              protocol: TCP
            - containerPort: 30009
              protocol: TCP
            - containerPort: 30010
              protocol: TCP
            - containerPort: 9150
              protocol: TCP
            - containerPort: 50000
              protocol: TCP
            - containerPort: 9003
              protocol: UDP
          volumeMounts:
            - mountPath: /app
              name: app
            - mountPath: /music
              name: media
            - mountPath: /data
              name: data
            - mountPath: /backup
              name: backup
      volumes:
        - name: app
          persistentVolumeClaim:
            claimName: app
        - name: media
          persistentVolumeClaim:
            claimName: media
        - name: data
          persistentVolumeClaim:
            claimName: data
        - name: backup
          persistentVolumeClaim:
            claimName: backup
