apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: rbd-provisioner
  namespace: ceph
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: rbd-provisioner
    spec:
      containers:
      - name: rbd-provisioner
        # echo $GOPATH
        #/go
        # mkdir -p /go/src/github.com/kubernetes-incubator/external-storage
        # cd /go/src/github.com/kubernetes-incubator/external-storage
        # git clone https://github.com/kubernetes-incubator/external-storage .
        # cd ceph/rbd
        # make build
        image: docker.ttys0.net/rbd-provisioner:12.2.5-1
        env:
        - name: PROVISIONER_NAME
          value: ceph.com/rbd
      serviceAccount: rbd-provisioner
      imagePullSecrets:
        - name: docker-reg-secret
