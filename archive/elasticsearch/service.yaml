apiVersion: v1
kind: Service
metadata:
  name: elasticsearch-discovery
  namespace: elasticsearch
  labels:
    component: elasticsearch
    role: master
spec:
  selector:
    component: elasticsearch
    role: master
  ports:
  - name: transport
    port: 9300
    protocol: TCP
  clusterIP: None
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearch-data
  namespace: elasticsearch
  labels:
    component: elasticsearch
    role: data
spec:
  ports:
  - port: 9300
    name: transport
  clusterIP: None
  selector:
    component: elasticsearch
    role: data
---
apiVersion: v1
kind: Service
metadata:
  namespace: elasticsearch
  name: elasticsearch-ingest-0
  labels:
    component: elasticsearch
    role: master
spec:
  selector:
    component: elasticsearch
    role: master
    statefulset.kubernetes.io/pod-name: es-master-0
  ports:
  - name: http
    port: 9200
    nodePort: 31920
  type: NodePort
---
apiVersion: v1
kind: Service
metadata:
  namespace: elasticsearch
  name: elasticsearch-ingest-1
  labels:
    component: elasticsearch
    role: master
spec:
  selector:
    component: elasticsearch
    role: master
    statefulset.kubernetes.io/pod-name: es-master-1
  ports:
  - name: http
    port: 9200
    nodePort: 31921
  type: NodePort
---
apiVersion: v1
kind: Service
metadata:
  namespace: elasticsearch
  name: elasticsearch-ingest-2
  labels:
    component: elasticsearch
    role: master
spec:
  selector:
    component: elasticsearch
    role: master
    statefulset.kubernetes.io/pod-name: es-master-2
  ports:
  - name: http
    port: 9200
    nodePort: 31922
  type: NodePort
---
kind: Service
apiVersion: v1
metadata:
  name: elasticsearch-ingress
  namespace: ingress-nginx
spec:
  type: ExternalName
  externalName: elasticsearch-ingest.elasticsearch.svc.cluster.local
  ports:
    - port: 9200
      name: http
---
apiVersion: v1
kind: Service
metadata:
  namespace: elasticsearch
  name: elasticsearch-ingest
  labels:
    component: elasticsearch
    role: master
spec:
  selector:
    component: elasticsearch
    role: master
  ports:
  - name: http
    port: 9200
  clusterIP: None