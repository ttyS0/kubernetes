kind: Service
apiVersion: v1
metadata:
  name: postgresql-internal
  namespace: postgresql
spec:
  selector:
    app: postgresql
  ports:
  - name: postgresql
    protocol: TCP
    port: 5432
    targetPort: 5432
---
kind: Service
apiVersion: v1
metadata:
  name: postgresql-external
  namespace: postgresql
spec:
  type: NodePort
  selector:
    app: postgresql
  ports:
  - name: postgresql
    protocol: TCP
    port: 5432
    targetPort: 5432
---
kind: Service
apiVersion: v1
metadata:
  name: postgresql-ingress
  namespace: ingress-nginx
spec:
  type: ExternalName
  externalName: postgresql-internal.postgresql.svc.cluster.local
  ports:
    - port: 5432

